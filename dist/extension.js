"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("vscode");function P(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var O,S;function V(){if(S)return O;S=1;var l=function(r){return n(r)&&!i(r)};function n(e){return!!e&&typeof e=="object"}function i(e){var r=Object.prototype.toString.call(e);return r==="[object RegExp]"||r==="[object Date]"||o(e)}var g=typeof Symbol=="function"&&Symbol.for,p=g?Symbol.for("react.element"):60103;function o(e){return e.$$typeof===p}function d(e){return Array.isArray(e)?[]:{}}function f(e,r){return r.clone!==!1&&r.isMergeableObject(e)?m(d(e),e,r):e}function y(e,r,t){return e.concat(r).map(function(u){return f(u,t)})}function b(e,r){if(!r.customMerge)return m;var t=r.customMerge(e);return typeof t=="function"?t:m}function E(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(r){return Object.propertyIsEnumerable.call(e,r)}):[]}function C(e){return Object.keys(e).concat(E(e))}function h(e,r){try{return r in e}catch{return!1}}function v(e,r){return h(e,r)&&!(Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))}function A(e,r,t){var u={};return t.isMergeableObject(e)&&C(e).forEach(function(c){u[c]=f(e[c],t)}),C(r).forEach(function(c){v(e,c)||(h(e,c)&&t.isMergeableObject(r[c])?u[c]=b(c,t)(e[c],r[c],t):u[c]=f(r[c],t))}),u}function m(e,r,t){t=t||{},t.arrayMerge=t.arrayMerge||y,t.isMergeableObject=t.isMergeableObject||l,t.cloneUnlessOtherwiseSpecified=f;var u=Array.isArray(r),c=Array.isArray(e),M=u===c;return M?u?t.arrayMerge(e,r,t):A(e,r,t):f(r,t)}m.all=function(r,t){if(!Array.isArray(r))throw new Error("first argument should be an array");return r.reduce(function(u,c){return m(u,c,t)},{})};var T=m;return O=T,O}var W=V();const k=P(W),j="files.exclude",w="toggleFilesExclude.isExcluded";class s{static get isExcluded(){const n=k.all(s.configScopes.map(({config:i})=>i));return Object.values(n).every(i=>i===!0)}static get configScopes(){const n=a.workspace.getConfiguration("toggleFilesExclude"),i=n.get("useGlobalScope"),g=n.get("useWorkspaceScope"),p=n.get("useWorkspaceFolderScope"),o=a.workspace.getConfiguration().inspect(j),d=(o==null?void 0:o.globalValue)??{},f=(o==null?void 0:o.workspaceValue)??{},y=(o==null?void 0:o.workspaceFolderValue)??{},b=[];return i&&b.push({config:d,scope:a.ConfigurationTarget.Global}),g&&b.push({config:f,scope:a.ConfigurationTarget.Workspace}),p&&b.push({config:y,scope:a.ConfigurationTarget.WorkspaceFolder}),b}static watchConfiguration(){return a.commands.executeCommand("setContext",w,s.isExcluded),a.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration(j)&&a.commands.executeCommand("setContext",w,s.isExcluded)})}static toggleConfig(n=null){s.configScopes.forEach(({config:i,scope:g})=>s.toggleConfigByScope(i,n??!s.isExcluded,g))}static show(){s.toggleConfig(!1)}static hide(){s.toggleConfig(!0)}static toggleConfigByScope(n,i,g){const p=Object.keys(n);if(p.length!==0){const o=Object.fromEntries(p.map(d=>[d,i]));a.workspace.getConfiguration().update(j,o,g)}}}function F(l){l.subscriptions.push(a.commands.registerCommand("toggleFilesExclude.toggle",s.toggleConfig)),l.subscriptions.push(s.watchConfiguration(),a.commands.registerCommand("toggleFilesExclude.show",s.show),a.commands.registerCommand("toggleFilesExclude.hide",s.hide))}exports.activate=F;
